# Elektrine Environment Variables
# Copy this file to .env and fill in the values

# =============================================================================
# CORE APPLICATION
# =============================================================================

# Phoenix server settings
PHX_HOST=localhost
PHX_SERVER=true
PORT=4000
URL_SCHEME=http
URL_PORT=4000
SECRET_KEY_BASE=generate_with_mix_phx_gen_secret
FORCE_SSL=false

# Instance configuration
INSTANCE_DOMAIN=localhost
EMAIL_DOMAIN=localhost

# =============================================================================
# DATABASE
# =============================================================================

DATABASE_URL=postgres://postgres:postgres@localhost/elektrine_dev
POOL_SIZE=10
ECTO_IPV6=false
DATABASE_SSL_VERIFY=peer
# Optional CA bundle path if your database uses a private CA
DATABASE_SSL_CACERTFILE=
# Optional override for TLS SNI/hostname verification
DATABASE_SSL_SERVER_NAME=
DB_PREPARE=named
DB_APPLICATION_NAME=elektrine
DB_QUEUE_TARGET_MS=2000
DB_QUEUE_INTERVAL_MS=5000
DB_TIMEOUT_MS=30000
DB_POOL_TIMEOUT_MS=15000
DB_CONNECT_TIMEOUT_MS=15000
MIGRATION_POOL_SIZE=1
MIGRATION_TIMEOUT_MS=120000
MIGRATION_POOL_TIMEOUT_MS=60000
MIGRATION_CONNECT_TIMEOUT_MS=60000
MIGRATION_DB_RETRIES=30
MIGRATION_RETRY_DELAY_MS=3000
# Optional direct DB URL for migrations if runtime uses a transaction pooler
MIGRATION_DATABASE_URL=

# =============================================================================
# ENCRYPTION (required for email storage)
# =============================================================================

ENCRYPTION_MASTER_SECRET=generate_32_byte_hex_string
ENCRYPTION_KEY_SALT=generate_random_salt
ENCRYPTION_SEARCH_SALT=generate_random_salt
SESSION_SIGNING_SALT=generate_random_salt
SESSION_ENCRYPTION_SALT=generate_random_salt

# =============================================================================
# EMAIL SERVICE
# =============================================================================

# Options: local, haraka
EMAIL_SERVICE=local
USE_LOCAL_EMAIL=true

# Haraka SMTP server (if EMAIL_SERVICE=haraka)
HARAKA_BASE_URL=http://localhost:2525
HARAKA_API_KEY=
HARAKA_ALLOWED_IPS=127.0.0.1

# =============================================================================
# OBJECT STORAGE (for attachments)
# =============================================================================

# Cloudflare R2
R2_ACCESS_KEY_ID=
R2_SECRET_ACCESS_KEY=
R2_ENDPOINT=
R2_BUCKET_NAME=
R2_PUBLIC_URL=

# =============================================================================
# SSL/TLS
# =============================================================================

# Let's Encrypt automatic certificates
LETS_ENCRYPT_ENABLED=false
ACME_ENVIRONMENT=production
CUSTOM_DOMAINS_SSL_ENABLED=false

# Manual SSL certificates
# SOME_APP_SSL_CERT_PATH=/path/to/cert.pem
# SOME_APP_SSL_KEY_PATH=/path/to/key.pem

# =============================================================================
# THIRD-PARTY SERVICES
# =============================================================================

# Cloudflare Turnstile (captcha)
TURNSTILE_SITE_KEY=
TURNSTILE_SECRET_KEY=

# Giphy API (for GIF search)
GIPHY_API_KEY=

# Sentry error tracking
SENTRY_DSN=

# =============================================================================
# VPN/NETWORKING
# =============================================================================

SERVER_PUBLIC_IP=
VPN_FLEET_REGISTRATION_KEY=
DNS_CLUSTER_QUERY=

# TURN server (for WebRTC)
TURN_USERNAME=
TURN_CREDENTIAL=

# =============================================================================
# MEIDO (AI Assistant Backend)
# =============================================================================

# Meido server URL (for Elektrine to connect to)
MEIDO_URL=http://localhost:8766

# Meido server bind address
MEIDO_HTTP_ADDR=0.0.0.0:8766
MEIDO_TIMEOUT=600

# Anthropic Claude
ANTHROPIC_API_KEY=
CLAUDE_MODEL=claude-sonnet-4-20250514

# CAI (Cybersecurity AI)
CAI_API_URL=http://127.0.0.1:8080
CAI_API_KEY=
CAI_AGENT=bug_bounter_agent
CAI_MODEL=alias1

# Alternative: ALIAS_API_KEY (same as CAI_API_KEY)
ALIAS_API_KEY=

# Brave Search API (for web search tool)
BRAVE_API_KEY=

# MCP servers (comma-separated list of server configs)
# MEIDO_MCP_SERVERS=server1:command1,server2:command2
